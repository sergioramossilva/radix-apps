#!/bin/bash
git clone https://github.com/sudo-give-me-coffee/elementary4all
cd elementary4all
chmod +x elementary4all
./elementary4all --configure
sudo apt install -y libsnapd-glib-dev
./elementary4all com.github.bartzaalberg.snaptastic
cd com.github.bartzaalberg.snaptastic
sudo apt install -y devscripts
debuild -i -us -uc -b
sudo apt autoremove --purge -y cmake cmake-data freetype2-doc gir1.2-atspi-2.0 gir1.2-dbusmenu-glib-0.4 gir1.2-dee-1.0 gir1.2-gee-0.8 gir1.2-harfbuzz-0.0 gir1.2-unity-5.0 gir1.2-wnck-3.0 gobject-introspection icu-devtools libatk-bridge2.0-dev libatk1.0-dev libatspi2.0-dev libblkid-dev libcairo-script-interpreter2 libcairo2-dev libdbus-1-dev libdbus-glib-1-dev libdbus-glib-1-dev-bin libdbusmenu-glib-dev libdee-dev libdrm-dev libegl1-mesa-dev libepoxy-dev libexpat1-dev libffi-dev libfontconfig1-dev libfreetype6-dev libfribidi-dev libgdk-pixbuf2.0-dev libgee-0.8-dev libgirepository1.0-dev libgl1-mesa-dev libgles1 libglib2.0-dev libglib2.0-dev-bin libglvnd-core-dev libglvnd-dev libgraphite2-dev libgtk-3-dev libharfbuzz-dev libharfbuzz-gobject0 libice-dev libicu-dev libjsoncpp1 libmount-dev libopengl0 libpango1.0-dev libpcre16-3 libpcre3-dev libpcre32-3 libpcrecpp0v5 libpixman-1-dev libpng-dev libpng-tools libpthread-stubs0-dev librhash0 libselinux1-dev libsepol1-dev libsm-dev libstartup-notification0-dev libunity-dev libvala-0.44-0 libvaladoc-0.44-0 libvaladoc-data libwayland-bin libwayland-dev libwnck-3-dev libx11-dev libx11-xcb-dev libxau-dev libxcb-dri2-0-dev libxcb-dri3-dev libxcb-glx0-dev libxcb-present-dev libxcb-randr0-dev libxcb-render0-dev libxcb-shape0-dev libxcb-shm0-dev libxcb-sync-dev libxcb-xfixes0-dev libxcb1-dev libxcomposite-dev libxcursor-dev libxdamage-dev libxdmcp-dev libxext-dev libxfixes-dev libxft-dev libxi-dev libxinerama-dev libxkbcommon-dev libxml2-dev libxrandr-dev libxrender-dev libxres-dev libxshmfence-dev libxtst-dev libxxf86vm-dev mesa-common-dev meson ninja-build pango1.0-tools python3-mako python3-markdown python3-markupsafe python3-pygments uuid-dev valac valac-0.44-vapi valadoc wayland-protocols x11proto-composite-dev x11proto-core-dev x11proto-damage-dev x11proto-dev x11proto-fixes-dev x11proto-input-dev x11proto-randr-dev x11proto-record-dev x11proto-xext-dev x11proto-xf86vidmode-dev x11proto-xinerama-dev xorg-sgml-doctools xtrans-dev libjson-glib-dev libpsl-dev libsnapd-glib-dev libsoup2.4-dev libsqlite3-dev at dctrl-tools devscripts dput libb-hooks-endofscope-perl libb-hooks-op-check-perl libclass-method-modifiers-perl libclass-xsaccessor-perl libcommon-sense-perl libconst-fast-perl libcontextual-return-perl libdata-optlist-perl libdevel-callchecker-perl libdevel-globaldestruction-perl libdistro-info-perl libdynaloader-functions-perl libfile-chdir-perl libfile-homedir-perl libfile-which-perl libgetopt-long-descriptive-perl libgit-wrapper-perl libgitlab-api-v4-perl libhttp-tiny-multipart-perl libimport-into-perl libio-prompter-perl libjson-perl libjson-xs-perl liblist-compare-perl liblog-any-adapter-screen-perl liblog-any-perl libmodule-implementation-perl libmodule-runtime-perl libmoo-perl libnamespace-clean-perl libnumber-compare-perl libnumber-range-perl libpackage-stash-perl libpackage-stash-xs-perl libparams-classify-perl libparams-util-perl libparams-validate-perl libpath-iterator-rule-perl libpod-constants-perl libreadonly-perl libref-util-perl libref-util-xs-perl libregexp-pattern-license-perl librole-tiny-perl libsort-key-perl libsort-versions-perl libstrictures-perl libstring-copyright-perl libstring-escape-perl libstring-shellquote-perl libsub-exporter-perl libsub-exporter-progressive-perl libsub-identify-perl libsub-install-perl libsub-quote-perl libterm-readkey-perl libtext-glob-perl libtype-tiny-perl libtype-tiny-xs-perl libtypes-serialiser-perl libvariable-magic-perl libwant-perl licensecheck python3-gpg python3-magic python3-unidiff wdiff
cd ../../..
mv -v build/elementary4all/com.github.bartzaalberg.snaptastic_*.deb .
rm -rfv build/elementary4all
